(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a(1),n=a.n(r),s=a(16),i=a.n(s),d=a(18),l=a(2),o=a(4),u=function(e,t){var a=t.type,c=t.payload;switch(a){case"SWITCH_LANGUAGE":return Object(l.a)(Object(l.a)({},e),{},{lang:c.lang});case"SWITCH_CART_STATUS":return Object(l.a)(Object(l.a)({},e),{},{isCartShow:c.cartStatus});case"SWITCH_LOADING_STATUS":return Object(l.a)(Object(l.a)({},e),{},{isLoading:c.loadingStatus});case"SET_GOODS":return Object(l.a)(Object(l.a)({},e),{},{featured:c.featured,daily:c.daily,featuredEndDate:c.featuredEndDate,dailyEndDate:c.dailyEndDate});case"SET_ORDER":return Object(l.a)(Object(l.a)({},e),{},{order:c.order});default:return e}},j=n.a.createContext(),b={lang:"en",featured:[],featuredEndDate:null,daily:[],dailyEndDate:null,order:[],isCartShow:!1,isLoading:!1},m=function(e){var t=e.children,a=n.a.useReducer(u,b),r=Object(o.a)(a,2),s=r[0],i=r[1];return s.switchLanguage=function(e){i({type:"SWITCH_LANGUAGE",payload:{lang:e}})},s.switchIsCartShow=function(e){i({type:"SWITCH_CART_STATUS",payload:{cartStatus:e}})},s.switchLoadingStatus=function(e){i({type:"SWITCH_LOADING_STATUS",payload:{loadingStatus:e}})},s.setGoods=function(e,t,a,c){i({type:"SET_GOODS",payload:{featured:e,daily:t,featuredEndDate:a,dailyEndDate:c}})},s.addToCart=function(e){var t=s.daily.find((function(t){return t.id===e.id}))||s.featured.find((function(t){return t.id===e.id})),a=Object(l.a)(Object(l.a)({},e),{},{quantity:1});t.isInBasket=!0,i({type:"SET_ORDER",payload:{order:[].concat(Object(d.a)(s.order),[a])}})},s.removeItem=function(e){var t=s.order.filter((function(t){return t.id!==e}));(s.featured.find((function(t){return t.id===e}))||s.daily.find((function(t){return t.id===e}))).isInBasket=!1,i({type:"SET_ORDER",payload:{order:t}})},s.cartItemQuanityChanger=function(e,t){var a=s.order.map((function(a){return a.id===e&&("plus"===t?a.quantity+=1:"minus"===t&&(a.quantity-=1)),a}));i({type:"SET_ORDER",payload:{order:a}})},s.remadeCart=function(){if(s.order.length){var e=s.order.map((function(e){var t=s.daily.find((function(t){return t.id===e.id}))||s.featured.find((function(t){return t.id===e.id}));return t.isInBasket=!0,e.name=t.name,e.description=t.description,e}));i({type:"SET_ORDER",payload:{order:e}})}},Object(c.jsx)(j.Provider,{value:s,children:t})},f=a.p+"static/media/store.1ee0bce9.svg",x=function(e){return Object(c.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsx)("img",{src:f,alt:"",width:"50",height:"50",className:"d-inline-block align-center pe-1"}),Object(c.jsx)("a",{class:"nav-link",href:"https://github.com/C1rfa/reactShop",children:"Repository"})]})})},O=a.p+"static/media/russia.c89ed68a.svg",h=a.p+"static/media/united-states.c29455bd.svg",p=function(e){var t=n.a.useContext(j).switchLanguage,a=function(e){t(e.target.id)};return Object(c.jsxs)("div",{className:"d-flex justify-content-evenly",children:[Object(c.jsx)("img",{onClick:a,id:"ru",src:O,alt:"Rus",className:"cart-icon"}),Object(c.jsx)("img",{onClick:a,id:"en",src:h,alt:"Eng",className:"cart-icon"})]})},g=function(e){var t=n.a.useContext(j).lang;return Object(c.jsxs)("footer",{className:"bg-dark text-center text-lg-start",children:[Object(c.jsxs)("div",{className:"text-center p-3 text-white",children:["\xa9 ",(new Date).getFullYear()," ","en"===t?"for Portfolio":"ru"===t?"\u0434\u043b\u044f \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e":""]}),Object(c.jsx)(p,{})]})},v=a(17),y=a.n(v),N=function(){return Object(c.jsxs)("div",{className:"preloader-wrapper",children:[Object(c.jsx)("span",{className:"circle circle-1"}),Object(c.jsx)("span",{className:"circle circle-2"}),Object(c.jsx)("span",{className:"circle circle-3"}),Object(c.jsx)("span",{className:"circle circle-4"}),Object(c.jsx)("span",{className:"circle circle-5"}),Object(c.jsx)("span",{className:"circle circle-6"}),Object(c.jsx)("span",{className:"circle circle-7"}),Object(c.jsx)("span",{className:"circle circle-8"})]})},w=function(e){var t=n.a.useContext(j).lang,a=n.a.useState(new Date(e.endDate).getTime()),r=Object(o.a)(a,1)[0],s=n.a.useState((new Date).getTime()),i=Object(o.a)(s,2),d=i[0],l=i[1],u=n.a.useState(e.title),b=Object(o.a)(u,1)[0],m=n.a.useRef("00"),f=n.a.useRef("00"),x=n.a.useRef("00"),O=n.a.useRef(null),h=function(){var e=(r-d)/1e3;x.current=Math.floor(e/3600),f.current=Math.floor(e/60%60),m.current=Math.floor(e%60),x.current>=0?(x.current=x.current/10<1?"0".concat(x.current):x.current,f.current=f.current/10<1?"0".concat(f.current):f.current,m.current=m.current/10<1?"0".concat(m.current):m.current):(x.current="00",f.current="00",m.current="00",clearInterval(O.current),O.current=null)};return h(),n.a.useEffect((function(){d<r&&(O.current=setInterval((function(){l((new Date).getTime())}),1e3))}),[]),n.a.useEffect((function(){h()}),[d]),n.a.useEffect((function(){return function(){clearInterval(O.current)}}),[r]),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"row text-center mt-5 mb-2",children:Object(c.jsxs)("h2",{className:"text-uppercase",children:[" ","en"===t?"till end of ":"ru"===t?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f\u0448\u043d\u0438\u0435 ":""," ",b]})}),Object(c.jsxs)("div",{className:"row justify-content-center border rounded-pill border-danger border-4 fw-bold fs-1",id:"countdown",children:[x.current," : ",f.current," : ",m.current]})]})},C=a.p+"static/media/add-to-cart.b31c153b.svg",S=a.p+"static/media/dollar.17a509fb.svg",E=function(e){var t=n.a.useContext(j),a=t.addToCart,r=t.lang;return Object(c.jsxs)("div",{className:"card border-dark rounded border-5",children:[Object(c.jsx)("img",{src:e.image,className:"card-img-top bg-secondary",alt:e.name}),Object(c.jsxs)("div",{className:"card-body bg-dark text-white text-center",children:[Object(c.jsx)("h5",{className:"card-title",children:e.name}),Object(c.jsx)("p",{className:"card-text",children:e.description})]}),Object(c.jsx)("ul",{className:"list-group list-group-flush",children:Object(c.jsxs)("li",{className:"list-group-item bg-dark text-white fw-bold text-uppercase d-flex justify-content-evenly",children:[Object(c.jsx)("img",{src:S,alt:"price",className:"icon"}),Object(c.jsxs)("p",{children:[e.price," ","en"===r?"USD":"ru"===r?"\u0440\u0443\u0431\u043b\u0435\u0439":""]})]})}),Object(c.jsx)("div",{className:"card-body d-grid bg-dark",children:e.isInBasket?"en"===r?Object(c.jsx)("p",{className:"text-white btn fw-bold bg-success border-5 rounded d-flex justify-content-center",children:"Already in cart"}):"ru"===r?Object(c.jsx)("p",{className:"text-white btn fw-bold bg-success border-5 rounded d-flex justify-content-center",children:"\u0423\u0436\u0435 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"}):"":Object(c.jsxs)("button",{onClick:function(){a({id:e.id,name:e.name,description:e.description,price:e.price,image:e.image})},className:"btn btn-outline-success border-5 rounded fw-bold",type:"button",children:[Object(c.jsx)("img",{src:C,alt:"to Cart",className:"icon"})," ","en"===r?"Add to Cart":"ru"===r?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443":""]})})]})},D=function(e){var t=e.items.map((function(t){return Object(c.jsx)(E,Object(l.a)({setOrder:e.setOrder,lang:e.lang},t),t.id)}));return Object(c.jsx)(c.Fragment,{children:t})},T=a.p+"static/media/shopping-cart.8d8292b1.svg",I=function(e){var t=n.a.useContext(j),a=t.order,r=t.isCartShow,s=t.switchIsCartShow;return Object(c.jsxs)("div",{className:"cart",onClick:function(){s(!r)},children:[Object(c.jsx)("img",{src:T,alt:"my cart",className:"cart-icon"}),a.length?Object(c.jsx)("span",{className:"fw-bold fs-5 text-white cart-quantity",children:a.length}):""]})},k=a.p+"static/media/rubbish-bin.e3c22733.svg",R=a.p+"static/media/minus.6d2e5963.svg",_=a.p+"static/media/add.c6f2e133.svg",A=function(e){var t=n.a.useContext(j),a=t.removeItem,r=t.cartItemQuanityChanger,s=function(t){r(e.id,t.target.id)};return Object(c.jsxs)("li",{className:"list-group-item list-group-item-action","aria-current":"true",children:[Object(c.jsxs)("div",{className:"d-flex w-100 align-items-center",children:[Object(c.jsx)("img",{src:e.image,alt:e.name,className:"cart-image border border-2 bg-secondary border-dark"}),Object(c.jsx)("h5",{className:"mb-1 fs-3 fw-bold ps-3 flex-fill",children:e.name}),Object(c.jsx)("img",{onClick:function(){a(e.id)},src:k,alt:"remove",className:"cart-icon"})]}),Object(c.jsx)("p",{className:"mb-1 fs-4 fw-normal text-dark",children:e.description}),Object(c.jsxs)("div",{className:"d-flex w-100 align-items-center",children:[Object(c.jsx)("small",{className:"mb-1 fs-3 fw-bold ps-3 flex-fill",children:e.price}),Object(c.jsx)("div",{className:"d-flex align-items-center justify-content-between"}),Object(c.jsx)("img",{onClick:s,id:"plus",src:_,alt:"plus",className:"cart-pi-icon"}),Object(c.jsx)("small",{className:"mb-1 fs-3 fw-bold pe-3 ps-3",children:e.quantity}),e.quantity>1?Object(c.jsx)("img",{onClick:s,id:"minus",src:R,alt:"minus",className:"cart-pi-icon"}):"",Object(c.jsx)("div",{})]})]})},L=a.p+"static/media/close.4fc975bc.svg",G=function(e){var t=n.a.useContext(j),a=t.isCartShow,r=t.order,s=t.lang,i=t.switchIsCartShow,d=r.map((function(t){return Object(c.jsx)(A,Object(l.a)({removeItem:e.removeItem,handleCartItemQuanity:e.handleCartItemQuanity},t),t.id)})),o=r.reduce((function(e,t){return e+t.price*t.quantity}),0);return Object(c.jsxs)("ul",{className:"list-group cart-list",children:[Object(c.jsx)("li",{className:"list-group-item active fw-bold fs-2 text-center",children:Object(c.jsxs)("div",{className:"d-grid d-flex justify-content-between align-items-center",children:["en"===s?"Cart":"ru"===s?"\u041a\u043e\u0440\u0437\u0438\u043d\u0430":"",Object(c.jsx)("button",{type:"button",className:"btn",onClick:function(){i(!a)},children:Object(c.jsx)("img",{src:L,alt:"close",className:"cart-icon"})})]})}),d.length?d:"en"===s?"Empty":"ru"===s?"\u041f\u0443\u0441\u0442\u043e":"",Object(c.jsx)("li",{className:"list-group-item active fw-bold fs-2",children:"en"===s?"Total: "+o:"ru"===s?"\u041e\u0431\u0449\u0430\u044f\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: "+o:""})]})},q=function(e){var t=n.a.useContext(j),a=t.featured,r=t.daily,s=t.featuredEndDate,i=t.dailyEndDate,d=t.isLoading,l=t.isCartShow,o=t.lang,u=t.switchLoadingStatus,b=t.setGoods,m=t.remadeCart;return n.a.useEffect((function(){u(!d),y()({url:"https://fortniteapi.io/v1/shop",method:"get",headers:{Authorization:"b07ae5cf-bb8fb047-45721c0f-a1445bf5"},params:{lang:o}}).then((function(e){return e.data})).then((function(e){b(e.featured,e.daily,e.endingDates.featured,e.endingDates.daily)})).finally((function(){u(!!d)}))}),[o]),n.a.useEffect((function(){m()}),[r,a]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("main",{children:[Object(c.jsx)(I,{}),d?Object(c.jsx)(N,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{endDate:s,title:"en"===o?"featured items":"ru"===o?"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b":""}),Object(c.jsx)("div",{className:"goods",children:Object(c.jsx)(D,{items:a})}),Object(c.jsx)(w,{endDate:i,title:"en"===o?"daily items":"ru"===o?"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b":""}),Object(c.jsx)("div",{className:"goods",children:Object(c.jsx)(D,{items:r})})]}),l&&Object(c.jsx)(G,{})]})})},U=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)(m,{children:[Object(c.jsx)(x,{}),Object(c.jsx)(q,{}),Object(c.jsx)(g,{})]})})};a(42);i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(U,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.55aa8891.chunk.js.map